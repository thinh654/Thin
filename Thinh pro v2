-- THINHEZ PRO FULL UPGRADE
-- by thinhezgame / he

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

-- DRAG FUNCTION
local function makeDraggable(frame)
	local dragging, dragStart, startPos = false
	frame.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = i.Position
			startPos = frame.Position
		end
	end)
	frame.InputEnded:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
			dragging = false
		end
	end)
	UIS.InputChanged:Connect(function(i)
		if dragging and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
			local delta = i.Position - dragStart
			frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- GUI ROOT
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ThinhezProGUI"
gui.ResetOnSpawn = false

-- LOADER
local loader = Instance.new("Frame", gui)
loader.Size = UDim2.new(0,400,0,200)
loader.Position = UDim2.new(0.5,-200,0.5,-100)
loader.BackgroundColor3 = Color3.fromRGB(20,20,20)
Instance.new("UICorner", loader).CornerRadius = UDim.new(0,16)
makeDraggable(loader)

local title = Instance.new("TextLabel", loader)
title.Size = UDim2.new(1,0,0,50)
title.Text = "THINHEZ PRO UPGRADE"
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1

local status = Instance.new("TextLabel", loader)
status.Position = UDim2.new(0,0,0,60)
status.Size = UDim2.new(1,0,0,30)
status.Text = "Waiting..."
status.TextScaled = true
status.Font = Enum.Font.Gotham
status.TextColor3 = Color3.fromRGB(200,200,200)
status.BackgroundTransparency = 1

local barBG = Instance.new("Frame", loader)
barBG.Position = UDim2.new(0.1,0,0.75,0)
barBG.Size = UDim2.new(0.8,0,0,15)
barBG.BackgroundColor3 = Color3.fromRGB(50,50,50)
Instance.new("UICorner", barBG).CornerRadius = UDim.new(1,0)

local bar = Instance.new("Frame", barBG)
bar.Size = UDim2.new(0,0,1,0)
bar.BackgroundColor3 = Color3.fromRGB(0,200,255)
Instance.new("UICorner", bar).CornerRadius = UDim.new(1,0)

local inject = Instance.new("TextButton", loader)
inject.Position = UDim2.new(0.25,0,0.85,0)
inject.Size = UDim2.new(0.5,0,0,40)
inject.Text = "INJECT"
inject.TextScaled = true
inject.Font = Enum.Font.GothamBold
inject.BackgroundColor3 = Color3.fromRGB(30,30,30)
inject.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", inject).CornerRadius = UDim.new(0,16)

-- BUILD MENU
local function buildMenu()
	local openBtn = Instance.new("TextButton", gui)
	openBtn.Size = UDim2.new(0,150,0,50)
	openBtn.Position = UDim2.new(0,20,0.5,0)
	openBtn.Text = "OPEN THINHEZ PRO"
	openBtn.TextScaled = true
	openBtn.Font = Enum.Font.GothamBold
	openBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
	openBtn.TextColor3 = Color3.new(1,1,1)
	Instance.new("UICorner", openBtn).CornerRadius = UDim.new(0,16)

	local menu = Instance.new("Frame", gui)
	menu.Size = UDim2.new(0,450,0,400)
	menu.Position = UDim2.new(0.5,-225,0.5,-200)
	menu.BackgroundColor3 = Color3.fromRGB(25,25,25)
	menu.Visible = false
	Instance.new("UICorner", menu).CornerRadius = UDim.new(0,16)
	makeDraggable(menu)

	openBtn.MouseButton1Click:Connect(function()
		menu.Visible = not menu.Visible
	end)

	local function btn(text, y)
		local b = Instance.new("TextButton", menu)
		b.Size = UDim2.new(1,-20,0,45)
		b.Position = UDim2.new(0,10,0,y)
		b.Text = text
		b.TextScaled = true
		b.Font = Enum.Font.GothamBold
		b.BackgroundColor3 = Color3.fromRGB(50,50,50)
		b.TextColor3 = Color3.new(1,1,1)
		Instance.new("UICorner", b).CornerRadius = UDim.new(0,14)
		return b
	end

	-- RUN
	local WALK, RUN = 16, 30
	local running = false
	btn("RUN",20).MouseButton1Click:Connect(function()
		running = not running
		humanoid.WalkSpeed = running and RUN or WALK
	end)

	-- FLY
	local flying, bv, bg = false
	btn("FLY",80).MouseButton1Click:Connect(function()
		flying = not flying
		if flying then
			bv = Instance.new("BodyVelocity", hrp)
			bv.MaxForce = Vector3.new(1e6,1e6,1e6)
			bg = Instance.new("BodyGyro", hrp)
			bg.MaxTorque = Vector3.new(1e6,1e6,1e6)
			humanoid.PlatformStand = true
		else
			if bv then bv:Destroy() end
			if bg then bg:Destroy() end
			humanoid.PlatformStand = false
		end
	end)

	RunService.RenderStepped:Connect(function()
		if flying and bv and bg then
			local cam = workspace.CurrentCamera
			local dir = humanoid.MoveDirection
			bv.Velocity = (cam.CFrame.LookVector * dir.Z + cam.CFrame.RightVector * dir.X) * 60
			bg.CFrame = cam.CFrame
		end
	end)

	-- NO GRAVITY
	local noG = false
	btn("NO GRAVITY",140).MouseButton1Click:Connect(function()
		noG = not noG
		workspace.Gravity = noG and 0 or 196.2
	end)

	-- GODMODE
	btn("GODMODE",200).MouseButton1Click:Connect(function()
		humanoid.Health = humanoid.MaxHealth
	end)

	-- NOCLIP
	local noclip = false
	btn("NOCLIP",260).MouseButton1Click:Connect(function()
		noclip = not noclip
	end)
	RunService.Stepped:Connect(function()
		if noclip then
			for _, part in pairs(char:GetDescendants()) do
				if part:IsA("BasePart") then part.CanCollide = false end
			end
		else
			for _, part in pairs(char:GetDescendants()) do
				if part:IsA("BasePart") then part.CanCollide = true end
			end
		end
	end)

	-- TP
	btn("TELEPORT",320).MouseButton1Click:Connect(function()
		local mouse = player:GetMouse()
		hrp.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0,3,0))
	end)

	-- ESP
	local espOn = false
	local esp = {}
	btn("ESP PLAYERS",380).MouseButton1Click:Connect(function()
		espOn = not espOn
		if espOn then
			for _,plr in pairs(Players:GetPlayers()) do
				if plr ~= player and plr.Character and not plr.Character:FindFirstChild("ESP") then
					local h = Instance.new("Highlight")
					h.Name = "ESP"
					h.FillColor = Color3.fromRGB(255,0,0)
					h.FillTransparency = 0.4
					h.Parent = plr.Character
					esp[plr] = h
				end
			end
		else
			for _,h in pairs(esp) do if h then h:Destroy() end end
			esp = {}
		end
	end)
end

-- INJECT
inject.MouseButton1Click:Connect(function()
	inject.Visible = false
	status.Text = "Loading Thinhez Pro..."
	for i=1,100 do
		bar.Size = UDim2.new(i/100,0,1,0)
		status.Text = "Loading Thinhez Pro... "..i.."%"
		task.wait(0.02)
	end
	status.Text = "Injected!"
	task.wait(0.3)
	loader.Visible = false
	buildMenu()
end)
