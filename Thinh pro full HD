-- THINHEZ PRO MINI
-- by thinhezgame / he

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

-- DRAG FUNCTION
local function makeDraggable(frame)
	local dragging, dragStart, startPos = false
	frame.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = i.Position
			startPos = frame.Position
		end
	end)
	frame.InputEnded:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
			dragging = false
		end
	end)
	UIS.InputChanged:Connect(function(i)
		if dragging and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
			local delta = i.Position - dragStart
			frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- GUI ROOT
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "ThinhezProMini"

-- OPEN BUTTON
local openBtn = Instance.new("TextButton", gui)
openBtn.Size = UDim2.new(0,150,0,40)
openBtn.Position = UDim2.new(0,20,0.5,-20)
openBtn.Text = "OPEN THINHEZ PRO"
openBtn.TextScaled = true
openBtn.Font = Enum.Font.GothamBold
openBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
openBtn.TextColor3 = Color3.fromRGB(255,255,255)
Instance.new("UICorner", openBtn).CornerRadius = UDim.new(0,12)
makeDraggable(openBtn)

-- MENU
local menu = Instance.new("Frame", gui)
menu.Size = UDim2.new(0,250,0,320)
menu.Position = UDim2.new(0.5,-125,0.5,-160)
menu.BackgroundColor3 = Color3.fromRGB(25,25,25)
menu.Visible = false
Instance.new("UICorner", menu).CornerRadius = UDim.new(0,12)
makeDraggable(menu)

openBtn.MouseButton1Click:Connect(function()
	menu.Visible = not menu.Visible
end)

local function btn(text, y)
	local b = Instance.new("TextButton", menu)
	b.Size = UDim2.new(1,-20,0,40)
	b.Position = UDim2.new(0,10,0,y)
	b.Text = text
	b.TextScaled = true
	b.Font = Enum.Font.GothamBold
	b.BackgroundColor3 = Color3.fromRGB(50,50,50)
	b.TextColor3 = Color3.fromRGB(255,255,255)
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,12)
	return b
end

-- FEATURES
local WALK, RUN = 16, 30
local running = false
btn("RUN",20).MouseButton1Click:Connect(function()
	running = not running
	humanoid.WalkSpeed = running and RUN or WALK
end)

local flying, bv, bg = false
btn("FLY",70).MouseButton1Click:Connect(function()
	flying = not flying
	if flying then
		bv = Instance.new("BodyVelocity", hrp)
		bv.MaxForce = Vector3.new(1e6,1e6,1e6)
		bg = Instance.new("BodyGyro", hrp)
		bg.MaxTorque = Vector3.new(1e6,1e6,1e6)
		humanoid.PlatformStand = true
	else
		if bv then bv:Destroy() end
		if bg then bg:Destroy() end
		humanoid.PlatformStand = false
	end
end)

RunService.RenderStepped:Connect(function()
	if flying and bv and bg then
		local cam = workspace.CurrentCamera
		local dir = humanoid.MoveDirection
		bv.Velocity = (cam.CFrame.LookVector * dir.Z + cam.CFrame.RightVector * dir.X) * 60
		bg.CFrame = cam.CFrame
	end
end)

local noG = false
btn("NO GRAVITY",120).MouseButton1Click:Connect(function()
	noG = not noG
	workspace.Gravity = noG and 0 or 196.2
end)

btn("GODMODE",170).MouseButton1Click:Connect(function()
	humanoid.Health = humanoid.MaxHealth
end)

local noclip = false
btn("NOCLIP",220).MouseButton1Click:Connect(function()
	noclip = not noclip
end)
RunService.Stepped:Connect(function()
	if noclip then
		for _, p in pairs(char:GetDescendants()) do
			if p:IsA("BasePart") then p.CanCollide = false end
		end
	else
		for _, p in pairs(char:GetDescendants()) do
			if p:IsA("BasePart") then p.CanCollide = true end
		end
	end
end)

-- TP TO PLAYER
btn("TP TO PLAYER",270).MouseButton1Click:Connect(function()
	local plrName = player:GetMouse().Target and player:GetMouse().Target.Parent.Name
	local target = Players:FindFirstChild(plrName)
	if target and target.Character then
		hrp.CFrame = target.Character.HumanoidRootPart.CFrame + Vector3.new(0,3,0)
	end
end)

-- ESP
local espOn = false
local esp = {}
btn("ESP PLAYERS",320).MouseButton1Click:Connect(function()
	espOn = not espOn
	if espOn then
		for _,plr in pairs(Players:GetPlayers()) do
			if plr ~= player and plr.Character and not plr.Character:FindFirstChild("ESP") then
				local h = Instance.new("Highlight")
				h.Name = "ESP"
				h.FillColor = Color3.fromRGB(255,0,0)
				h.FillTransparency = 0.4
				h.Parent = plr.Character
				esp[plr] = h
			end
		end
	else
		for _,h in pairs(esp) do if h then h:Destroy() end end
		esp = {}
	end
end)
